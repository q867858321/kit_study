(function(n){var t=n.InterstitialAd=function(){function n(n){this.videoId=n;this.onloadfns=[];this.onerrorfns=[];this.onclosefns=[];this.inited=false;this.loading=false;this.loaded=false;setTimeout(function(){this.load().catch(function(n){throw n})}.bind(this),100)}Object.assign(n.prototype,{load:function(){var n=this;var t=this.onloadfns;if(!this.videoId||this.loaded===true){return new Promise(function(o,e){setTimeout(function(){o(n.loaded===true?undefined:false);_.forEach(t,function(n){n&&n()})},0)})}var n=this;return new Promise(function(o,e){function i(t){if(n.inited===true){return new Promise(function(t){setTimeout(function(){t(n.video)},0)})}else{if(n.inited!==true||n.loaded!==true){o(false)}FBInstant.getInterstitialAdAsync(t).then(function(t){n.video=t;n.inited=true;t.loadAsync().then(function(){n.loaded=true}).catch(console.warn)}).catch(console.warn)}}i(n.videoId).then(function(t){if(t===false){return o(false)}n.video=t;n.inited=true;if(n.loaded===true){return new Promise(function(n,t){setTimeout(function(){n()},0)})}return t.loadAsync()}).then(function(){n.loaded=true;o(n.video);_.forEach(t,function(n){n&&n()})}).catch(function(n){console.warn(n);e(n)})})},show:function(){var n=this;var t=this.onclosefns;if(!this.video){return new Promise(function(n){setTimeout(function(){n(false);setTimeout(function(){_.forEach(t,function(n){n&&n({isEnded:true})})},0)},0)})}var o=function(){if(n.loaded===true){return new Promise(function(t){setTimeout(function(){t(n.video)},0);setTimeout(function(){n.load().catch(console.warn)},100)})}else{return n.load()}};return new Promise(function(e,i){o().then(function(n){if(n===false){return e(false)}return n.showAsync()}).then(function(){n.inited=false;n.loaded=false;e();_.forEach(t,function(n){n&&n({isEnded:true})});setTimeout(function(){n.load().catch(console.warn)},100)}).catch(i)})},onLoad:function(n){this.onloadfns.push(n)},offLoad:function(n){this.onloadfns.remove(n)},onError:function(n){this.onerrorfns.push(n)},offError:function(n){this.onerrorfns.remove(n)},onClose:function(n){this.onclosefns.push(n)},offClose:function(n){this.onclosefns=this.onclosefns.filter(function(t){return t!==n})}});return n}()})(this);