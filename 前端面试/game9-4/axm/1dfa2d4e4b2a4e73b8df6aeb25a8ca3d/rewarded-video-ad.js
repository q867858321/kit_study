(function(n){var o=n.RewardedVideoAd=function(){function n(n){this.videoId=n;this.onloadfns=[];this.onerrorfns=[];this.onclosefns=[];this.inited=false;this.loading=false;this.loaded=false;setTimeout(function(){this.load().catch(function(n){throw n})}.bind(this),100)}Object.assign(n.prototype,{load:function(){var n=this;var o=this.onloadfns;if(!this.videoId||this.loaded===true){return new Promise(function(t,e){setTimeout(function(){t(n.loaded===true?undefined:false);_.forEach(o,function(n){n&&n()})},0)})}var n=this;return new Promise(function(t,e){function i(o){if(n.inited===true){return new Promise(function(o){setTimeout(function(){o(n.video)},0)})}else{if(n.inited!==true||n.loaded!==true){t(false)}FBInstant.getRewardedVideoAsync(o).then(function(o){n.video=o;n.inited=true;o.loadAsync().then(function(){n.loaded=true}).catch(console.warn)}).catch(console.warn)}}i(n.videoId).then(function(o){if(o===false){return t(false)}n.video=o;n.inited=true;if(n.loaded===true){return new Promise(function(n,o){setTimeout(function(){n()},0)})}return o.loadAsync()}).then(function(){n.loaded=true;t(n.video);_.forEach(o,function(n){n&&n()})}).catch(function(n){console.warn(n);e(n)})})},show:function(){var n=this;var o=this.onclosefns;if(!this.video){return new Promise(function(t){setTimeout(function(){t(false);setTimeout(function(){_.forEach(o,function(n){n&&n({isEnded:true})});setTimeout(function(){n.load().catch(console.warn)},100)},0)},0)})}var t=function(){if(n.loaded===true){return new Promise(function(o){setTimeout(function(){o(n.video)},0)})}else{return n.load()}};return new Promise(function(e,i){t().then(function(n){if(n===false){return e(false)}return n.showAsync()}).then(function(){n.inited=false;n.loaded=false;e();_.forEach(o,function(n){n&&n({isEnded:true})});setTimeout(function(){n.load().catch(console.warn)},100)}).catch(i)})},onLoad:function(n){this.onloadfns.push(n)},offLoad:function(n){this.onloadfns.remove(n)},onError:function(n){this.onerrorfns.push(n)},offError:function(n){this.onerrorfns.remove(n)},onClose:function(n){this.onclosefns.push(n)},offClose:function(n){this.onclosefns=this.onclosefns.filter(function(o){return o!==n})}});return n}()})(this);